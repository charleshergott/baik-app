<div class="home-container">


    <app-chronometer></app-chronometer>

    <div class="planning-section">
        <div class="map-wrapper">
            <div id="map" class="map-container"></div>
        </div>
    </div>

    <button (click)="goToContacts()" class="contacts">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 48 48">
            <g fill="none">
                <path fill="#2f88ff" stroke="#410ee2" stroke-linejoin="round" stroke-width="4"
                    d="M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z" />
                <path fill="#fff" fill-rule="evenodd"
                    d="M24 11C25.3807 11 26.5 12.1193 26.5 13.5C26.5 14.8807 25.3807 16 24 16C22.6193 16 21.5 14.8807 21.5 13.5C21.5 12.1193 22.6193 11 24 11Z"
                    clip-rule="evenodd" />
                <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"
                    d="M24.5 34V20H23.5H22.5" />
                <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M21 34H28" />
            </g>
        </svg>
    </button>

    <div class="load-route-btn">

        <button (click)="toggleSavedRoutes()" class="btn-saved-routes">
            ğŸ“‚ ({{ savedRoutes.length }})
        </button>



        <button *ngIf="isRecordingRoute || _gpsService.getCurrentRoute().length > 0" (click)="saveRoute()"
            class="btn-save">
            ğŸ’¾
        </button>



        <button *ngIf="isRecordingRoute || _gpsService.getCurrentRoute().length > 0" (click)="clearCurrentRoute()"
            class="btn-clear">
            ğŸ—‘ï¸
        </button>

    </div>

</div>

<div *ngIf="showSavedRoutes" class="saved-routes-panel">
    <div class="panel-header">
        <h3>Saved Routes</h3>
        <button (click)="toggleSavedRoutes()" class="btn-close">âœ•</button>
    </div>

    <div class="routes-list">
        <div *ngFor="let route of savedRoutes" class="route-item" (click)="viewSavedRoute(route)">
            <div class="route-info">
                <h4>{{ route.name }}</h4>
                <div class="route-stats">
                    <span>ğŸ“ {{ formatDistance(route.distance) }}</span>
                    <span>â±ï¸ {{ formatDuration(route.duration) }}</span>
                    <span>âš¡ {{ formatSpeed(route.maxSpeed) }}</span>
                </div>
                <div class="route-date">{{ formatDate(route.startTime) }}</div>
            </div>
            <button (click)="deleteSavedRoute(route, $event)" class="btn-delete">
                ğŸ—‘ï¸
            </button>
        </div>

        <div *ngIf="savedRoutes.length === 0" class="no-routes">
            No saved routes yet. Start recording to create one!
        </div>
    </div>
</div>