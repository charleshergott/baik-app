<div class="home-container">

    <app-chronometer></app-chronometer>

    <div class="planning-section">

        <!-- Map Section with Info Window -->
        <div class="map-wrapper">

            <div id="map" class="map-container"></div>

        </div>

        <!-- Mobile-friendly waypoint summary -->
        <div class="waypoints-summary" *ngIf="waypoints.length > 0">
            <!-- <div class="summary-header">
                <h3>Route: {{waypoints.length}} waypoints</h3>
                <button (click)="clearAllWaypoints()" class="clear-btn">Clear All</button>
            </div> -->

        </div>
    </div>

    <!-- <div class="flight-controls"> -->
    <!-- <div class="flight-controls"> -->
    <div class="load-route-btn">
        <!-- <button *ngIf="!isRecordingRoute" (click)="startRecording()" [disabled]="!hasGpsSignal" class="btn-start">
            ğŸ¬ Start Recording
        </button> -->

        <button *ngIf="isRecordingRoute" (click)="stopRecording()" class="btn-stop">
            â¹ï¸ Stop Recording
        </button>

        <button *ngIf="isRecordingRoute || _gpsService.getCurrentRoute().length > 0" (click)="saveRoute()"
            class="btn-save">
            ğŸ’¾ Save Route
        </button>

        <button (click)="toggleSavedRoutes()" class="btn-saved-routes">
            ğŸ“‚ ({{ savedRoutes.length }})
        </button>

        <button *ngIf="isRecordingRoute || _gpsService.getCurrentRoute().length > 0" (click)="clearCurrentRoute()"
            class="btn-clear">
            ğŸ—‘ï¸ Clear
        </button>
        <small>v.24.300925</small>
    </div>
    <!-- </div> -->


    <!-- </div> -->
</div>


<!-- Saved Routes Panel -->
<div *ngIf="showSavedRoutes" class="saved-routes-panel">
    <div class="panel-header">
        <h3>Saved Routes</h3>
        <button (click)="toggleSavedRoutes()" class="btn-close">âœ•</button>
    </div>

    <div class="routes-list">
        <div *ngFor="let route of savedRoutes" class="route-item" (click)="viewSavedRoute(route)">
            <div class="route-info">
                <h4>{{ route.name }}</h4>
                <div class="route-stats">
                    <span>ğŸ“ {{ formatDistance(route.distance) }}</span>
                    <span>â±ï¸ {{ formatDuration(route.duration) }}</span>
                    <span>âš¡ {{ formatSpeed(route.maxSpeed) }}</span>
                </div>
                <div class="route-date">{{ formatDate(route.startTime) }}</div>
            </div>
            <button (click)="deleteSavedRoute(route, $event)" class="btn-delete">
                ğŸ—‘ï¸
            </button>
        </div>

        <div *ngIf="savedRoutes.length === 0" class="no-routes">
            No saved routes yet. Start recording to create one!
        </div>
    </div>
</div>